<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz</title>

</head>
<style>
    * {
        padding: 0;
        margin: 0;
    }

    body {
        display: flex;
        justify-content: center;
        align-items: center;
        background: #007bff;
    }

    .quiz-outer-body {
        background: white;
        border: 1px solid;
        width: 35%;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.8);
    }

    .info-title {
        text-align: center;
        font-size: 35px;
        border-bottom: 1px solid rgb(14, 13, 13);
        margin-top: 12px;
    }

    .info {
        font-size: 18px;
        margin: 5px;
    }



    .info-button {
        text-align: center;
        border-top: 1px solid rgb(22, 21, 21);
    }

    .info-button #next-btn {

        text-align: center;
        padding: 8px;
        margin-top: 12px;
        margin-bottom: 12px;

    }

    ;
</style>

<body>


    <div class="quiz-outer-body">

        <div id="rules">


            <div class="info-title"><span>Some Rules of this Quiz</span></div>

            <div class="info"><b>Please read the below instruction before starting the quiz</b></div>
            <div class="info">1. You will get 50 seconds to complete the quiz</div>
            <div class="info">2. Once you select the answer,it can't be change</div>
            <div class="info">3.You can't be exit from the Quiz while you're playing </div>
            <div class="info">4. You will get points on the behalf of your correct answers</div>
            <div class="info">5. For correct answer you will score 1 and for incorrect you will get score 0</div>
            <div class="info">6. Before starting the quiz please check your internet connection properly. </div>

            <div class="info-button">
                <button id="next-btn" onclick="showLevels()">Start Quiz</button>

            </div>

        </div>

        <!-- <div id="levels" style="display: none;">
            <h2>Select Difficulty levels:</h2>
            <select id="levelSelect">
                <option value="easy">Easy</option>
                <option value="medium">Medium</option>
                <option value="hard">Hard</option>
            </select>
            <button onclick="startQuiz()">Start</button>
        </div> -->

        <div id="levels" style="display: none">
            <h2 id="question">Question goes here</h2>

            <div id="answer-buttons">
                <button class="btn">Answer 1</button>
                <button class="btn">Answer 2</button>
                <button class="btn">Answer 3</button>
                <button class="btn">Answer 4</button>
            </div>
            <div class="info-button">
                <button id="next-btn">Next</button>
                <div id="validationMessage" style="display:none; color:red;font-size: 25px;">Please select one option.
                </div>

            </div>
        </div>
        <script>

            var currentQuestionIndex = 0;
            // const questionElement = document.getElementById("question");
            // const answerbuttons = document.getElementById("answer-buttons");
            // const nextBtn = document.getElementById("next-btn");
            let score = 0;
            const questions = [
  {
    question: " which is largest animal in the world ?",
    answers: [
      { text: "Shark", correct: false },
      { text: "Blue whale", correct: true },
      { text: "Giraffe", correct: false },
      { text: "Elephant", correct: false },
    ],
  },
  {
    question: " which is smallest  continent in the world ?",
    answers: [
      { text: "Asia", correct: false },
      { text: "Australia", correct: true },
      { text: "Arctic", correct: false },
      { text: "Africa", correct: false },
    ],
  },
  {
    question: " which is capital of India ?",
    answers: [
      { text: "New Delhi", correct: true },
      { text: "jaipur", correct: false },
      { text: "Udaipur", correct: false },
      { text: "Kota", correct: false },
    ],
  },

  {
    question: " which city is called as Pink City ?",
    answers: [
      { text: "New Delhi", correct: false },
      { text: "jaipur", correct: true },
      { text: "Udaipur", correct: false },
      { text: "Kota", correct: false },
    ],
  },

  {
    question: " which city is called as City of lake ?",
    answers: [
      { text: "New Delhi", correct: false },
      { text: "jaipur", correct: false },
      { text: "Udaipur", correct: true },
      { text: "Kota", correct: false },
    ],
  },
];
           
const questionElement = document.getElementById("question");
const answerbuttons = document.getElementById("answer-buttons");
const nextBtn = document.getElementById("next-btn");
const timerElement = document.getElementById("time");
const timerElement2 = document.getElementById("timer");

function showLevels() {
                document.getElementById('rules').style.display = "none";
                document.getElementById('levels').style.display = "block";
            }


            function startQuiz() {
                var selectedLevel = document.getElementById("levelSelect").value;
                var selectedQuestions = quest[selectedLevel];
                displayQuestions(selectedQuestions);
            }



            function displayQuestions(){
                function startQuiz() {
  currentQuestionIndex = 0;
  score = 0;
  nextBtn.innerHTML = "Next";
  showQuestion();
}

function showQuestion() {
  myTimer();
  resetState();

  let currentQuestion = questions[currentQuestionIndex];
  let questionNo = currentQuestionIndex + 1;
  questionElement.innerHTML = questionNo + " ." + currentQuestion.question;

  currentQuestion.answers.forEach((answer) => {
    const button = document.createElement("button");
    button.innerHTML = answer.text;
    button.classList.add("btn");
    answerbuttons.appendChild(button);
    
    if (answer.correct) {
      button.dataset.correct = answer.correct;
    }
    button.addEventListener("click", selectAnswer);
  });
}

function resetState() {
  while (answerbuttons.firstChild) {
    answerbuttons.removeChild(answerbuttons.firstChild);
  }
}

function showRemarks() {
  resetState();
  questionElement.innerHTML = `Your Scored ${score} out of ${questions.length}!`;
  nextBtn.style.display = "none";
  validationMessage.innerHTML = "";
  timerElement.style.display = "none";
  timerElement2.style.display = "none";
}

function handleNextButton() {
  currentQuestionIndex++;
  if (currentQuestionIndex < questions.length) {
    showQuestion();
  } else {
    showRemarks();
  }
}

nextBtn.addEventListener("click", () => {
  console.log(answerbuttons, "ans");
  var parent = answerbuttons;
  var children = parent.children;
  var c = false;

  for (let i = 0; i < children.length; i++) {
    if (
      children[i].classList.contains("Incorrect") ||
      children[i].classList.contains("correct")
    ) {
      console.log("true", children[i]);
      c = true;
    }
  }

  if (!c) {
    document.getElementById("validationMessage").style.display = "block";
  } else {
    document.getElementById("validationMessage").style.display = "none";
  }

  if (currentQuestionIndex < questions.length) {
    if (c) {
      handleNextButton();
    }
  } else {
    if (true) {
      document.getElementById("validationMessage").style.display = "none";
    }

    startQuiz();
  }
});

function selectAnswer(e) {
  debugger
  const selectedBtn = e.target;
  const isCorrect = selectedBtn.dataset.correct === "true";
  if (isCorrect) {
    selectedBtn.classList.add("correct");
    score++;
  } else {
    selectedBtn.classList.add("Incorrect");
  }

  Array.from(answerbuttons.children).forEach((button) => {
    if (button.dataset.correct === "true") {
      button.classList.add("correct");
    }
    button.disabled = true;
  });
}
startQuiz();

            }
       </script>
</body>

</html>