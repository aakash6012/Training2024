<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/week4/dest/quiz.css" />
    <script src="dest/script.js" defer type="module"></script>
</head>


<body>


    <div class="quiz-outer-body">

        <div id="rules">


            <div class="info-title"><span>Some Rules of this Quiz</span></div>

            <div class="info"><b>Please read the below instruction before starting the quiz</b></div>
            <div class="info">1. You will get 50 seconds to complete the quiz</div>
            <div class="info">2. Once you select the answer,it can't be change</div>
            <div class="info">3.You can't be exit from the Quiz while you're playing </div>
            <div class="info">4. You will get points on the behalf of your correct answers</div>
            <div class="info">5. For correct answer you will score 1 and for incorrect you will get score 0</div>
            <div class="info">6. Before starting the quiz please check your internet connection properly. </div>

            <div class="info-button">
                <button id="next-btn" onclick="showLevels()">Start Quiz</button>

            </div>

        </div>

        <div id="levels" style="display: none;">
            <h2>Select Difficulty levels:</h2>
            <select id="levelSelect">
                <option value="easy">Easy</option>
                <option value="medium">Medium</option>
                <option value="hard">Hard</option>
            </select>
            <button onclick="startQuiz()">Start</button>
        </div>

        <div id="quiz" style="display: none">
            <h2 id="question">Question goes here</h2>

            <div id="answer-buttons">
                <button class="btn">Answer 1</button>
                <button class="btn">Answer 2</button>
                <button class="btn">Answer 3</button>
                <button class="btn">Answer 4</button>
            </div>
            <div class="info-button">
                <button id="next-btn">Next</button>
                <div id="validationMessage" style="display:none; color:red;font-size: 25px;">Please select one option.
                </div>

            </div>
        </div>
        <script>

            var currentQuestionIndex = 0;
            const questionElement = document.getElementById("question");
            const answerbuttons = document.getElementById("answer-buttons");
            const nextBtn = document.getElementById("next-btn");
            let score = 0;
            var quest = {
                easy: [
                    {
                        question: " which is largest animal in the world ?",
                        answers: [
                            { text: "Shark", correct: false },
                            { text: "Blue whale", correct: true },
                            { text: "Giraffe", correct: false },
                            { text: "Elephant", correct: false },
                        ],
                    },
                    {
                        question: " which is smallest  continent in the world ?",
                        answers: [
                            { text: "Asia", correct: false },
                            { text: "Australia", correct: true },
                            { text: "Arctic", correct: false },
                            { text: "Africa", correct: false },
                        ],
                    },
                    {
                        question: " which is largest animal in the world ?",
                        answers: [
                            { text: "Shark", correct: false },
                            { text: "Blue whale", correct: true },
                            { text: "Giraffe", correct: false },
                            { text: "Elephant", correct: false },
                        ],
                    },
                    {
                        question: " which is smallest  continent in the world ?",
                        answers: [
                            { text: "Asia", correct: false },
                            { text: "Australia", correct: true },
                            { text: "Arctic", correct: false },
                            { text: "Africa", correct: false },
                        ],
                    }
                ],
                medium: [
                    {
                        question: " which is capital of India ?",
                        answers: [
                            { text: "New Delhi", correct: true },
                            { text: "jaipur", correct: false },
                            { text: "Udaipur", correct: false },
                            { text: "Kota", correct: false },
                        ],
                    },

                    {
                        question: " which city is called as Pink City ?",
                        answers: [
                            { text: "New Delhi", correct: false },
                            { text: "jaipur", correct: true },
                            { text: "Udaipur", correct: false },
                            { text: "Kota", correct: false },
                        ],
                    },
                    {
                        question: " which is capital of India ?",
                        answers: [
                            { text: "New Delhi", correct: true },
                            { text: "jaipur", correct: false },
                            { text: "Udaipur", correct: false },
                            { text: "Kota", correct: false },
                        ],
                    },

                    {
                        question: " which city is called as Pink City ?",
                        answers: [
                            { text: "New Delhi", correct: false },
                            { text: "jaipur", correct: true },
                            { text: "Udaipur", correct: false },
                            { text: "Kota", correct: false },
                        ],
                    },
                ],
                hard: [
                    {
                        question: " which city is called as Pink City ?",
                        answers: [
                            { text: "New Delhi", correct: false },
                            { text: "jaipur", correct: true },
                            { text: "Udaipur", correct: false },
                            { text: "Kota", correct: false },
                        ],
                    },

                    {
                        question: " which city is called as City of lake ?",
                        answers: [
                            { text: "New Delhi", correct: false },
                            { text: "jaipur", correct: false },
                            { text: "Udaipur", correct: true },
                            { text: "Kota", correct: false },
                        ],
                    },
                    {
                        question: " which city is called as Pink City ?",
                        answers: [
                            { text: "New Delhi", correct: false },
                            { text: "jaipur", correct: true },
                            { text: "Udaipur", correct: false },
                            { text: "Kota", correct: false },
                        ],
                    },

                    {
                        question: " which city is called as City of lake ?",
                        answers: [
                            { text: "New Delhi", correct: false },
                            { text: "jaipur", correct: false },
                            { text: "Udaipur", correct: true },
                            { text: "Kota", correct: false },
                        ],
                    }
                ],
            };

            function showLevels() {
                document.getElementById('rules').style.display = "none";
                document.getElementById('levels').style.display = "block";
            }


            function startQuiz() {
                var selectedLevel = document.getElementById("levelSelect").value;
                var selectedQuestions = quest[selectedLevel];
                displayQuestions(selectedQuestions);
            }



            function displayQuestions(questions) {
                var quizContainer = document.getElementById("quiz");
                console.log(questions[0]);
                const currentQuestion = questions[currentQuestionIndex];
                const questionNo = currentQuestionIndex + 1;
                answerbuttons.innerHTML = ""

                questionElement.innerHTML = questionNo + " ." + questions[currentQuestionIndex].question;

                // console.log(currentQuestion, "s")



                currentQuestion.answers.forEach((answer) => {
                    const button = document.createElement("button");
                    button.innerHTML = answer.text;

                    button.classList.add("btn");
                    if (answer.correct) {
                        button.dataset.correct = String(answer.correct);
                    }
                    answerbuttons.appendChild(button);
                    button.addEventListener("click", selectAnswer);
                });

                document.getElementById("levels").style.display = "none";
                document.getElementById("quiz").style.display = "block";
            }


            function selectAnswer(e) {
                // debugger;
                const selectedBtn = e.target;
                const isCorrect = selectedBtn.dataset.correct === "true";
                if (isCorrect) {
                    selectedBtn.classList.add("correct");
                    score++;
                }
                else {
                    selectedBtn.classList.add("Incorrect");
                }
                // if (answerbuttons) {
                Array.from(answerbuttons.children).forEach((button) => {
                    if (button.dataset.correct === "true") {
                        button.classList.add("correct");
                    }
                    button.disabled = true;
                });
            }
     
            function handleNextButton() {
                currentQuestionIndex++;
                if (currentQuestionIndex < que.length) {
                    showQuestion();
                }
                else {
                    showRemarks();
                }
            }

            nextBtn.addEventListener("click", () => {
    console.log(answerbuttons, "ans");
    const parent = answerbuttons;
    // if (parent) {
    const children = parent.children;
    let classFlag = false;
    for (let i = 0; i < children.length; i++) {
        if (children[i].classList.contains("Incorrect") ||
            children[i].classList.contains("correct")) {
            console.log("true", children[i]);
            classFlag = true;
        }
    }
    const validationMessage = document.getElementById("validationMessage");
    validationMessage.style.display = classFlag ? "none" : "block";
    if (currentQuestionIndex < quest.length) {
        // if (classFlag) {
        handleNextButton();
        // }
    }
    else {
        // if (true) {
        // if (validationMessage) {
        validationMessage.style.display = "none";
        // }
        // }
        startQuiz();
    }
});
        </script>
</body>

</html>